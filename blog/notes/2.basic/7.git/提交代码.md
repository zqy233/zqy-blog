# æäº¤ä»£ç è‡³è¿œç¨‹ä»“åº“

æœ¬åœ°ä»£ç åˆæ¬¡æäº¤è‡³è¿œç¨‹ç©ºä»“åº“æ—¶éœ€è¦è¿è¡Œ`git init`å‘½ä»¤ï¼Œåˆ›å»ºå¿…è¦çš„`.git`æ–‡ä»¶å³æœ¬åœ°ä»“åº“ï¼Œè¯¥æ–‡ä»¶é»˜è®¤æ˜¯éšè—çš„ï¼Œ`.git`æ–‡ä»¶ä¸­å­˜å‚¨æœ¬é¡¹ç›®ç›¸å…³gitä¿¡æ¯ï¼Œå¦‚åç»­æ·»åŠ çš„è¿œç¨‹ä»“åº“åœ°å€ï¼Œæ¯æ¬¡æäº¤å†…å®¹çš„è¯´æ˜ä¹Ÿå°±æ˜¯`git commit`ç­‰ç­‰ä¿¡æ¯

## æäº¤ä»£ç 

originæ˜¯è¿œç¨‹ä»“åº“çš„åˆ«åï¼Œgithubè¿œç¨‹ä»“åº“çš„åç§°é»˜è®¤ä¸ºorigin

`git push -u`æ˜¯`git push --set-upstream`çš„ç¼©å†™ï¼Œè¡¨æ ¼å…³è”è¿œç¨‹ä»“åº“

`git add`æ˜¯å°†æ–‡ä»¶ä»å·¥ä½œåŒºâ€“>æš‚å­˜åŒº
`git commit `æ˜¯å°†æ–‡ä»¶ä»æš‚å­˜åŒºâ€“>gitæœ¬åœ°ä»“åº“

```sh
# åˆ›å»º.gitæ–‡ä»¶å³æœ¬åœ°ä»“åº“
git init   
# æ·»åŠ è¿œç¨‹ä»“åº“åœ°å€
git remote add origin https://git-repo-address.git  
# ä¿å­˜é¡¹ç›®å†…å®¹è‡³æœ¬åœ°ä»“åº“
git add . 
# æœ¬æ¬¡æäº¤çš„è¯´æ˜
git commit -m "commitText" 
# pushæ—¶å…³è”è¿œç¨‹ä»“åº“
git push -u origin master 
```

### ä¹‹åæäº¤

```sh
git add . 
git commit -m "commitText" 
# å¤šäººå¼€å‘çš„é¡¹ç›®æ¯æ¬¡æäº¤å‰åº”å…ˆpullæ‹‰å–ä»£ç 
# å…¶ä»–å¼€å‘è€…å¯èƒ½æ¯”ä½ å…ˆæäº¤ä»£ç ï¼Œä¸æ‹‰å–ç›´æ¥æäº¤ä¼šè¦†ç›–ä»–çš„ä»£ç ï¼Œä¸€èˆ¬æƒ…å†µä¸‹gitä¹Ÿä¼šè¿›è¡Œæç¤º
git pull 
# æ‹‰å–åæ²¡æœ‰ä»£ç å†²çªï¼ˆä¸åŒå¼€å‘è€…ä¿®æ”¹äº†ç›¸åŒä¸€å¤„çš„ä»£ç ï¼‰å¯ä»¥ç›´æ¥æäº¤
git push 
```

> å¦‚æœå‡ºç°ä»£ç å†²çªé—®é¢˜(ç›¸åŒä»£ç å¤„æœ‰ä¸åŒçš„ä¿®æ”¹)ï¼Œè¿™æ—¶éœ€è¦æ‰‹åŠ¨åœ¨é¡¹ç›®ä¸­é€‰æ‹©ä¿å­˜å“ªä¸€éƒ¨åˆ†ä»£ç ï¼Œä»è€Œè§£å†³å†²çªï¼Œç„¶åé‡æ–°èµ°ä¸€éæäº¤æµç¨‹

## git stashæš‚å­˜ä»£ç 

æ¯”å¦‚åœ¨devåˆ†æ”¯å¼€å‘åŠŸèƒ½ï¼Œä½†åŠŸèƒ½ä»£ç è¿˜æ²¡å†™å®Œï¼Œè¦å»ä¿®å¤ä¸€ä¸ªçº¿ä¸Šçš„bugï¼Œè¿™æ—¶ä¸é€‚åˆcommitï¼Œä¹Ÿä¸é€‚åˆç›´æ¥åˆ‡æ¢åˆ†æ”¯ï¼ˆç›´æ¥åˆ‡æ¢åˆ†æ”¯ä¼šå¯¼è‡´è‡ªåŠ¨åˆå¹¶ï¼‰

### ä¸æäº¤çš„æƒ…å†µä¸‹åˆ‡æ¢åˆ†æ”¯

ä¼šå‡ºç°ä»¥ä¸‹æŠ¥é”™

```sh
error: Your local changes to the following files would be overwritten by checkout:
        test.js
Please commit your changes or stash them before you switch branches.
Aborting
```

è¿™æ—¶å°±éœ€è¦ä½¿ç”¨stashå‘½ä»¤ï¼Œ å°†å½“å‰æœªæäº¤çš„ä¿®æ”¹(å³ï¼Œå·¥ä½œåŒºçš„ä¿®æ”¹å’Œæš‚å­˜åŒºçš„ä¿®æ”¹)å…ˆæš‚æ—¶å‚¨è—èµ·æ¥ï¼Œè¿™æ ·å·¥ä½œåŒºå¹²å‡€äº†åï¼Œå°±å¯ä»¥åˆ‡æ¢åˆ°masteråˆ†æ”¯ï¼Œç„¶åå†åˆ›å»ºä¸€ä¸ªfixåˆ†æ”¯ã€‚åœ¨å®Œæˆçº¿ä¸Šbugçš„ä¿®å¤å·¥ä½œåï¼Œé‡æ–°åˆ‡æ¢åˆ°devåˆ†æ”¯

```sh
git stash
git checkout master
```

ä¿®æ”¹å®Œä¹‹åï¼Œå›åˆ°å¼€å‘åˆ†æ”¯ï¼Œæ‰§è¡Œ

```sh
git checkout dev
# æŸ¥çœ‹å‚¨å­˜çš„ä¿®æ”¹
git stash list
```

#### æ–¹æ³•ä¸€

`git stash apply stash@{index}`è¡¨ç¤ºå–å‡ºæŒ‡å®šå‚¨è—ä¸­çš„ä¿®æ”¹åˆ°å·¥ä½œåŒº

`git stash drop stash@{index}`è¡¨ç¤ºå°†æŒ‡å®šindexçš„å‚¨è—ä»å‚¨è—è®°å½•åˆ—è¡¨ä¸­åˆ é™¤

```sh
# å•ä¸ªå­˜å‚¨
git stash apply
git stash drop
# å¤šä¸ªå­˜å‚¨ï¼Œç¤ºä¾‹ï¼Œåº”ç”¨ç¬¬ä¸€ä¸ªå­˜å‚¨
git stash apply stash@{0}
git stash drop stash@{0}
```

#### æ–¹æ³•äºŒ:

`git stash pop`å¯å–å‡ºæœ€è¿‘ä¸€æ¬¡å‚¨è—çš„ä¿®æ”¹åˆ°å·¥ä½œåŒºï¼Œå¹¶åŒæ—¶å°†è¯¥å‚¨è—ä»å‚¨è—è®°å½•åˆ—è¡¨ä¸­åˆ é™¤

`git stash pop stash@{index}`è¡¨ç¤ºé€šè¿‡å‚¨è—åˆ—è¡¨çš„indexå–å‡ºæŒ‡å®šå‚¨è—ä¸­çš„ä¿®æ”¹åˆ°å·¥ä½œåŒº

```sh
git stash pop
# å¤šä¸ªå­˜å‚¨ï¼Œç¤ºä¾‹ï¼Œåº”ç”¨ç¬¬ä¸€ä¸ªå­˜å‚¨
git stash pop stash@{0}
```

## é”™è¯¯æäº¤è¿›è¡Œå›é€€

1.æ²¡æœ‰`git add`æ—¶ï¼Œç”¨`git checkout -- file`

2.å·²ç»`git add`æ—¶ï¼Œå…ˆ`git reset HEAD <file>`å›é€€åˆ°1.ï¼Œå†æŒ‰1.æ“ä½œ

3.å·²ç»`git commit`æ—¶ï¼Œç”¨`git reset`å›é€€ç‰ˆæœ¬

4.æ¨é€åˆ°è¿œç¨‹åº“ï¼ŒGG?

## åˆå¹¶commit

> ä¸»è¦ç›®çš„æ˜¯å°†è®¸å¤šæäº¤åˆå¹¶ä¸ºå‡ ä¸ªæ›´ç®€æ´æ˜äº†çš„æäº¤

ä¸€èˆ¬æœ‰ä¸¤ç§æƒ…å†µ

- å°†å½“å‰åˆ†æ”¯ä¸åŒçš„æäº¤åˆå¹¶ä¸ºä¸€ä¸ªã€‚ä»¥ä¾¿gitå†å²è®°å½•çœ‹èµ·æ¥æ¸…æ™°å¹¶æœ€å¥½åœ°åæ˜ å·²å®Œæˆçš„ä»»åŠ¡
- åœ¨è¿›è¡Œåˆ†æ”¯åˆå¹¶æ—¶è¿›è¡Œå‹ç¼©ã€‚æ¯”å¦‚ï¼Œä»ä¸»åˆ†æ”¯åˆ›å»ºä¸€ä¸ªåŠŸèƒ½åˆ†æ”¯ï¼Œç”¨äºæŸäº›åŠŸèƒ½å¼€å‘ï¼ŒåŠŸèƒ½å®Œæˆåï¼Œå°†åŠŸèƒ½åˆ†æ”¯åˆå¹¶åˆ°ä¸»åˆ†æ”¯ä¸­ï¼Œè¿™æ—¶ï¼Œæœ‰å¯èƒ½å¸Œæœ›å°†åŠŸèƒ½åˆ†æ”¯ä¸­å®Œæˆçš„å„ç§æäº¤æ¶ˆæ¯å‹ç¼©ä¸ºä¸€ä¸ª

### ä½¿ç”¨äº¤äº’å¼ git rebase å·¥å…·å‹ç¼© Git æäº¤

è€ƒè™‘ä»¥ä¸‹ git log æ‘˜å½•ï¼Œå®ƒæ˜¾ç¤ºäº†æˆ‘ä»¬å¯¹å‹ç¼©æ„Ÿå…´è¶£çš„ HEAD çš„æœ€åå››ä¸ªæäº¤

```sh
25c38c4 remove .class files
da66e6a Delete version.ini
f4e3f09 Delete .log
b0e6655 Delete .lock
da66e6a github git notes
```

æˆ‘ä»¬å¯ä»¥åœ¨æ—¥å¿—ä¸­çœ‹åˆ°å‰å››ä¸ªæäº¤æ¶ˆæ¯ï¼Œè¡¨ç¤ºåˆ é™¤ä¸åŒçš„ä¸ç›¸å…³æ–‡ä»¶çš„æ“ä½œã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°†æŠŠè¿™å››ä¸ªæäº¤åˆå¹¶ä¸ºä¸€ä¸ª

ä»¥ä¸‹æ˜¯ä½¿ç”¨äº¤äº’å¼å˜åŸºå·¥å…·å‹ç¼©æœ€å X æ¬¡æäº¤çš„å‘½ä»¤çš„è¯­æ³•

```sh
git rebase -i HEAD~[X]`
```

å› æ­¤ï¼Œè¦å‹ç¼©å››ä¸ªæäº¤ï¼Œæˆ‘ä»¬å°†æ‰§è¡Œä»¥ä¸‹æ“ä½œã€‚

```sh
$ git rebase -i HEAD~4
```

å‘å‡ºæ­¤å‘½ä»¤åï¼ŒGit å°†è°ƒç”¨vimç¼–è¾‘å™¨

```sh
pick b0e6655 Delete .lock
pick f4e3f09 Delete .log 
pick da66e6a Delete version.ini
pick 25c38c4 remove .class files

# Rebase 652d2fe..25c38c4 onto 652d2fe (4 command(s))
#
# Commands:
# p, pick = use commit
# r, reword = use commit, but edit the commit message
# e, edit = use commit, but stop for amending
# s, squash = use commit, but meld into previous commit
# f, fixup = like "squash", but discard this commit's log message
# x, exec = run command (the rest of the line) using shell
# d, drop = remove commit
#
# These lines can be re-ordered; they are executed from top to bottom.
#
# If you remove a line here THAT COMMIT WILL BE LOST.
#
# However, if you remove everything, the rebase will be aborted.
#
# Note that empty commits are commented out
```

ç¼–è¾‘å™¨ä½¿ç”¨ pick å‘½ä»¤æ˜¾ç¤ºå„ç§æäº¤ã€‚å®ƒè¿˜æ˜¾ç¤ºæœ‰å…³å¯ç”¨å‘½ä»¤çš„ä¿¡æ¯ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ squashï¼ˆæˆ– sï¼‰å‘½ä»¤ã€‚

å¦‚ä¸‹æ‰€ç¤ºï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ pick å‘½ä»¤ä¿ç•™ç¬¬ä¸€ä¸ªæäº¤ï¼Œå¹¶å°†å…¶ä½™ä¸‰ä¸ªæäº¤ä» pick æ›´æ”¹ä¸º sï¼ˆç”¨äºå£çƒï¼‰å‘½ä»¤ã€‚

```sh
pick b0e6655 Delete .lock
s f4e3f09 Delete .log 
s da66e6a Delete version.ini
s 25c38c4 remove .class files

# Rebase 652d2fe..25c38c4 onto 652d2fe (4 command(s))
#
...
```

æ ‡æœ‰ squashï¼ˆæˆ– sï¼‰çš„æäº¤å°†åˆå¹¶åˆ°ä¸»æäº¤å³ã€‚æ ‡æœ‰ pick çš„é‚£ä¸ªã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬å°†åœ¨ç¼–è¾‘å™¨ä¸­ä¿å­˜æ›´æ”¹å¹¶é€€å‡ºã€‚åœ¨æ­¤ä¹‹åï¼Œrebase -i å·¥å…·å°†æ‰“å¼€å¦ä¸€ä¸ªç¼–è¾‘å™¨ä»¥è¾“å…¥æäº¤æ¶ˆæ¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```sh
# This is a combination of 4 commits. The first commit's message is:

Delete .lock

# This is the 2nd commit message:

Delete .log 

# This is the 3rd commit message:

Delete version.ini

# This is the 4th commit message:

remove .class files

# Please enter the commit message for your changes. Lines starting
# with '#' will be ignored, and an empty message aborts the commit.
#
# Date:      Sun Jan 3 16:39:23 2021 +0530
#
# interactive rebase in progress; onto 652d2fe
# Last commands done (4 commands done):
#    pick b0e6655 Delete .lock
#    s f4e3f09 Delete .log 
#    s da66e6a Delete version.ini
#    s 25c38c4 remove .class files
# No commands remaining.
# You are currently editing a commit while rebasing branch 'master' on '652d2fe'.
#
# Changes to be committed:
#       new file:   github-git-notes.txt
#
```

ç°åœ¨ï¼Œæˆ‘ä»¬å°†åœ¨ç¬¬ä¸€æ¡æäº¤æ¶ˆæ¯çš„é¡¶éƒ¨æ·»åŠ æ–°çš„æäº¤æ¶ˆæ¯ã€‚

```sh
Deleted irrelevant files

# This is a combination of 4 commits. The first commit's message is:

Delete .lock

# This is the 2nd commit message:

Delete .log
...
```

ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘å™¨åï¼Œ`rebase -i` å·¥å…·å°†æ‰“å°ä»¥ä¸‹æ¶ˆæ¯ã€‚

```sh
HEAD~2
Rebasing (2/2)


[detached HEAD caab6e8] Deleted irrelevant files
 Date: Sun Jan 3 16:39:23 2021 +0530
 1 file changed, 54 insertions(+)
 create mode 100644 github-git-notes.txt
Successfully rebased and updated refs/heads/master.
```

ç°åœ¨ï¼Œæˆ‘ä»¬å°†æ£€æŸ¥ git log å¹¶æŸ¥çœ‹ squashed æäº¤ï¼ˆå³ï¼‰å•ä¸ªæäº¤æ¶ˆæ¯è€Œä¸æ˜¯å››ä¸ªæäº¤æ¶ˆæ¯ã€‚

```sh
$ git log --oneline
25c38c4 Deleted irrelevant files
da66e6a github git notes
...
```

### ä½¿ç”¨ git merge -squash å‹ç¼© Git æäº¤

ä»¥ä¸‹æ˜¯å°†åˆ†æ”¯ä¸å½“å‰åˆ†æ”¯ï¼ˆé€šå¸¸æ˜¯ mainï¼‰åˆå¹¶å¹¶å‹ç¼©æºåˆ†æ”¯çš„æäº¤çš„å‘½ä»¤è¯­æ³•ã€‚

```sh
git merge --squash <source_branch_name_to_squash>
```

æˆ‘ä»¬ç°åœ¨å°†åˆå¹¶åŠŸèƒ½åˆ†æ”¯å³ã€‚feature1 ä¸ main åˆ†æ”¯ä¸€èµ·å‹ç¼©ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬å°†åˆ‡æ¢åˆ° master åˆ†æ”¯ã€‚

```sh
$ git checkout main
Switched to branch 'main'
```

ç„¶åï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ squash é€‰é¡¹æ‰§è¡Œ git mergeï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚

```sh
$ git merge --squash feature1
Squash commit -- not updating HEAD
Automatic merge went well; stopped before committing as requested
```

å½“æˆ‘ä»¬ä½¿ç”¨ --squash é€‰é¡¹æ‰§è¡Œ merge æ—¶ï¼ŒGit ä¸ä¼šåƒåœ¨æ­£å¸¸åˆå¹¶ä¸­é‚£æ ·åœ¨ç›®æ ‡åˆ†æ”¯ä¸­åˆ›å»ºåˆå¹¶æäº¤ã€‚ç›¸åï¼ŒGit æ¥å—æºåˆ†æ”¯ä¸­çš„æ‰€æœ‰æ›´æ”¹ã€‚feature1 å¹¶å°†å…¶ä½œä¸ºæœ¬åœ°æ›´æ”¹æ”¾å…¥ç›®æ ‡åˆ†æ”¯å³ master çš„å·¥ä½œå‰¯æœ¬ä¸­ã€‚

è¯·å‚é˜…ä¸‹æ–‡ã€‚

```sh
$ git status
On branch main
Changes to be committed:
  (use "git restore --staged <file>..." to unstage)
	modified:   config.ini
```

åœ¨è¿™é‡Œï¼Œæ–‡ä»¶ config.ini åœ¨ feature1 åˆ†æ”¯ä¸­è¿›è¡Œäº†æ›´æ”¹ã€‚

ç°åœ¨ï¼Œå‰©ä¸‹çš„å°±æ˜¯å°†æ›´æ”¹æäº¤åˆ° main åˆ†æ”¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚

```sh
$ git commit -am 'Merged and squashed the feature1 branch changes'
[main 573b923] Squashed and merged the feature1 branch
 1 file changed, 4 insertions(+)
```

å› æ­¤ï¼Œæˆ‘ä»¬ç°åœ¨å·²å°† feature1 åˆ†æ”¯ä¸­çš„æ›´æ”¹åˆå¹¶åˆ° main åˆ†æ”¯ï¼ŒåŒæ—¶å‹ç¼©äº† feature1 åˆ†æ”¯çš„æäº¤æ¶ˆæ¯ã€‚æˆ‘ä»¬ç°åœ¨åœ¨ main åˆ†æ”¯ä¸­åªæœ‰ä¸€æ¡æäº¤æ¶ˆæ¯ã€‚

## git rebase/å˜åŸº

å˜åŸºæ—¶æœ‰å…­ä¸ªå‘½ä»¤å¯ç”¨ï¼š

### edit

> å¦‚æœæ‚¨é€‰æ‹©editæäº¤ï¼Œåˆ™å°†æœ‰æœºä¼šä¿®æ”¹æäº¤ï¼Œè¿™æ„å‘³ç€æ‚¨å¯ä»¥å®Œå…¨æ·»åŠ æˆ–æ›´æ”¹æäº¤ã€‚æ‚¨è¿˜å¯ä»¥è¿›è¡Œæ›´å¤šæäº¤ï¼Œç„¶åå†ç»§ç»­è¿›è¡Œå˜åŸºã€‚è¿™ä½¿æ‚¨å¯ä»¥å°†å¤§å‹æäº¤æ‹†åˆ†ä¸ºè¾ƒå°çš„æäº¤ï¼Œæˆ–è€…åˆ é™¤åœ¨æäº¤ä¸­æ‰€åšçš„é”™è¯¯æ›´æ”¹

### exec

> è¿™ä½¿æ‚¨å¯ä»¥å¯¹æäº¤è¿è¡Œä»»æ„çš„Shellå‘½ä»¤

### pick/æ›´æ”¹æäº¤é¡ºåº

> pickåªæ˜¯æ„å‘³ç€åŒ…æ‹¬æäº¤ã€‚é‡æ–°è¿›è¡Œå‘½ä»¤æ—¶ï¼Œé‡æ–°å®‰æ’pickå‘½ä»¤çš„é¡ºåºä¼šæ›´æ”¹æäº¤çš„é¡ºåºã€‚å¦‚æœé€‰æ‹©ä¸åŒ…æ‹¬æäº¤ï¼Œåˆ™åº”åˆ é™¤æ•´è¡Œ

ç¤ºä¾‹æ“ä½œï¼Œæ›´æ¢å€’æ•°ç¬¬ä¸€æ¬¡å’Œå€’æ•°ç¬¬äºŒæ¬¡çš„æäº¤è®°å½•é¡ºåº

1. `git rebase -i HEAD~2`  è¡¨ç¤ºæ”¹å˜å€’æ•°ç¬¬2æ¬¡åçš„æäº¤ï¼Œä¼šæ‰“å¼€vimç¼–è¾‘å™¨
2. æŠŠ ç¬¬ä¸€è¡Œ å’Œ ç¬¬äºŒè¡Œ äº¤æ¢é¡ºåºï¼Œç§»åŠ¨åˆ°ç¬¬ä¸€è¡Œ æŒ‰`dd`ï¼Œæœ¬è¡Œå°±è¢«å‰ªåˆ‡ï¼Œç¬¬äºŒè¡Œå°±å˜æˆäº†ç¬¬ä¸€è¡Œï¼Œæ¥ç€æŒ‰ `p`åˆšåˆšå‰ªåˆ‡çš„å°±æˆäº†ç¬¬äºŒè¡Œï¼Œå¿«é€Ÿäº¤æ¢é¡ºåº
3. æ¥ç€ `Esc`,`:wq` ä¿å­˜é€€å‡º

### reword/æ›´æ”¹æäº¤ä¿¡æ¯

> è¯¥rewordå‘½ä»¤ä¸ç›¸ä¼¼pickï¼Œä½†æ˜¯ä½¿ç”¨åï¼Œé‡æ–°è®¾ç½®è¿‡ç¨‹å°†æš‚åœå¹¶ä¸ºæ‚¨æä¾›æ›´æ”¹æäº¤æ¶ˆæ¯çš„æœºä¼šã€‚æäº¤æ‰€åšçš„ä»»ä½•æ›´æ”¹å‡ä¸å—å½±å“

ç¤ºä¾‹æ“ä½œï¼Œæ›´æ”¹ç¬¬ä¸€è¡Œçš„æäº¤ä¿¡æ¯

1. `git rebase -i HEAD~2`
2. `i`è¿›å…¥æ’å…¥æ¨¡å¼ï¼Œ`Del`åˆ é™¤ç¬¬ä¸€è¡Œçš„`pick`ï¼Œæ”¹ä¸º`r`
3. æ¥ç€ `Esc`,`:wq` ä¿å­˜é€€å‡º
4. å°±å¯ä»¥ä¿®æ”¹ç¬¬ä¸€è¡Œäº†çš„commitäº†ï¼Œ`i`è¿›å…¥æ’å…¥æ¨¡å¼ï¼Œæ›´æ”¹ç¬¬ä¸€è¡Œcommit
5. æ¥ç€ `Esc`,`:wq` ä¿å­˜é€€å‡º

### squash/åˆå¹¶æäº¤

> è¯¥å‘½ä»¤ä½¿æ‚¨å¯ä»¥å°†ä¸¤ä¸ªæˆ–å¤šä¸ªæäº¤åˆå¹¶ä¸ºä¸€ä¸ªæäº¤ã€‚æäº¤è¢«å‹ç¼©åˆ°å…¶ä¸Šæ–¹çš„æäº¤ä¸­ã€‚Gitä½¿æ‚¨æœ‰æœºä¼šç¼–å†™æè¿°è¿™ä¸¤ä¸ªæ›´æ”¹çš„æ–°æäº¤æ¶ˆæ¯

ç¤ºä¾‹æ“ä½œï¼Œåˆå¹¶ç¬¬ä¸€è¡Œå’Œç¬¬äºŒè¡Œçš„æäº¤

- `git rebase - i HEAD~2`
- `i`è¿›å…¥æ’å…¥æ¨¡å¼ï¼Œ`Del`åˆ é™¤ç¬¬äºŒè¡Œçš„`pick`ï¼Œæ”¹ä¸º`s`
- æ¥ç€ `Esc`,`:wq` ä¿å­˜é€€å‡º
- å°±å¯ä»¥ä¿®æ”¹è¾“å…¥åçš„commitäº†ï¼Œè¾“å…¥commit
- æ¥ç€ `Esc`,`:wq` ä¿å­˜é€€å‡º

### fixup/åˆå¹¶æäº¤

> ç±»ä¼¼`squash`ï¼Œä¹Ÿæ˜¯ç”¨äºåˆå¹¶æäº¤ï¼Œä½†è¦åˆå¹¶çš„æäº¤ä¼šä¸¢å¼ƒå…¶commitæ¶ˆæ¯ã€‚æäº¤ä»…åˆå¹¶åˆ°å…¶ä¸Šæ–¹çš„æäº¤ä¸­ï¼Œå¹¶ä¸”ä½¿ç”¨è¾ƒæ—©æäº¤çš„commitæ¶ˆæ¯æ¥æè¿°è¿™ä¸¤ä¸ªæ›´æ”¹

ç¤ºä¾‹æ“ä½œï¼Œåˆå¹¶ç¬¬ä¸€è¡Œå’Œç¬¬äºŒè¡Œçš„æäº¤

- git rebase -i HEAD~2  
- `i`è¿›å…¥æ’å…¥æ¨¡å¼ï¼Œ`Del`åˆ é™¤ç¬¬äºŒè¡Œçš„`pick`ï¼Œæ”¹ä¸º`f`
- æ¥ç€ `Esc`,`:wq` ä¿å­˜é€€å‡º
- `git log`æ‰“å°ä¼šå‘ç°åªæœ‰æœ€æ–°ä¸€æ¬¡å’Œå€’æ•°ç¬¬äºŒæ¬¡çš„commitåˆå¹¶äº†ï¼Œcommitæ¶ˆæ¯æ˜¯å€’æ•°ç¬¬äºŒæ¬¡çš„æ¶ˆæ¯

###  git rebase --abort

æ§åˆ¶å°å‡ºç°ï¼šfatal: It seems that there is already a rebase-merge directory, and I wonder if you are in the middle of another rebase.  If that is the case, please try

ä½¿ç”¨è¯¥å‘½ä»¤è§£å†³è¯¥é—®é¢˜ï¼Œæ”¾å¼ƒä¹‹å‰çš„å˜åŸºæ“ä½œ

### ç”¨æ³•ä¸€

åœºæ™¯ï¼šä¸€ä¸ªå¼€å‘ä»»åŠ¡ï¼Œéœ€è¦ä¸‰å¤©å®Œæˆï¼Œæ¯å¤©éƒ½æäº¤ä¸€éƒ¨åˆ†ä»£ç ï¼Œç›´åˆ°ç¬¬ä¸‰å¤©å®Œæˆæ•´ä¸ªä»»åŠ¡ï¼Œè¿™æ—¶å€™æˆ‘ä»¬æƒ³åˆå¹¶ç¬¬ä¸€å¤©åˆ°ç¬¬ä¸‰å¤©çš„commitæäº¤è®°å½•ï¼Œå› ä¸ºè¿™æ‰æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¼€å‘ä»»åŠ¡ï¼Œä»è€Œä½¿è®°å½•æ›´ç®€æ´æ›´æ˜“äºä»–äºº

```sh
# æŒ‡å®šä¸€ä¸ªcommitçš„hashä»£ç ï¼Œåˆå¹¶å½“å‰åˆ°è¯¥hashä¹‹é—´çš„æ‰€æœ‰æäº¤è®°å½•
git rebase -i commitçš„hashä»£ç 
```

## commitæ·»åŠ emoji

> åœ¨æäº¤å†…å®¹çš„å‰é¢å¢åŠ emojiä»£ç 

```bash
git commit -m '	:art: :zap: :racehorse: æ­¤æ¬¡æäº¤çš„å†…å®¹è¯´æ˜'
```

åˆ—è¡¨è§ä¸‹é¢çš„é™„å½•è¡¨æ ¼

| emoji            | emojiä»£ç                     | commit è¯´æ˜           |
| ---------------- | ---------------------------- | --------------------- |
| ğŸ¨ (è°ƒè‰²æ¿)       | `:art:`                      | æ”¹è¿›ä»£ç ç»“æ„/ä»£ç æ ¼å¼ |
| âš¡ (é—ªç”µ)ğŸ (èµ›é©¬) | `:zap:â€œ:racehorse:`          | æå‡æ€§èƒ½              |
| ğŸ”¥ (ç«ç„°)         | `:fire:`                     | ç§»é™¤ä»£ç æˆ–æ–‡ä»¶        |
| ğŸ› (bug)          | `:bug:`                      | ä¿®å¤ bug              |
| ğŸš‘ (æ€¥æ•‘è½¦)       | `:ambulance:`                | é‡è¦è¡¥ä¸              |
| âœ¨ (ç«èŠ±)         | `:sparkles:`                 | å¼•å…¥æ–°åŠŸèƒ½            |
| ğŸ“ (å¤‡å¿˜å½•)       | `:memo:`                     | æ’°å†™æ–‡æ¡£              |
| ğŸš€ (ç«ç®­)         | `:rocket:`                   | éƒ¨ç½²åŠŸèƒ½              |
| ğŸ’„ (å£çº¢)         | `:lipstick:`                 | æ›´æ–° UI å’Œæ ·å¼æ–‡ä»¶    |
| ğŸ‰ (åº†ç¥)         | `:tada:`                     | åˆæ¬¡æäº¤              |
| âœ… (ç™½è‰²å¤é€‰æ¡†)   | `:white_check_mark:`         | å¢åŠ æµ‹è¯•              |
| ğŸ”’ (é”)           | `:lock:`                     | ä¿®å¤å®‰å…¨é—®é¢˜          |
| ğŸ (è‹¹æœ)         | `:apple:`                    | ä¿®å¤ macOS ä¸‹çš„é—®é¢˜   |
| ğŸ§ (ä¼é¹…)         | `:penguin:`                  | ä¿®å¤ Linux ä¸‹çš„é—®é¢˜   |
| ğŸ (æ——å¸œ)         | `:checked_flag:`             | ä¿®å¤ Windows ä¸‹çš„é—®é¢˜ |
| ğŸ”– (ä¹¦ç­¾)         | `:bookmark:`                 | å‘è¡Œ/ç‰ˆæœ¬æ ‡ç­¾         |
| ğŸš¨ (è­¦è½¦ç¯)       | `:rotating_light:`           | ç§»é™¤ linter è­¦å‘Š      |
| ğŸš§ (æ–½å·¥)         | `:construction:`             | å·¥ä½œè¿›è¡Œä¸­            |
| ğŸ’š (ç»¿å¿ƒ)         | `:green_heart:`              | ä¿®å¤ CI æ„å»ºé—®é¢˜      |
| â¬‡ï¸ (ä¸‹é™ç®­å¤´)     | `:arrow_down:`               | é™çº§ä¾èµ–              |
| â¬†ï¸ (ä¸Šå‡ç®­å¤´)     | `:arrow_up:`                 | å‡çº§ä¾èµ–              |
| ğŸ‘· (å·¥äºº)         | `:construction_worker:`      | æ·»åŠ  CI æ„å»ºç³»ç»Ÿ      |
| ğŸ“ˆ (ä¸Šå‡è¶‹åŠ¿å›¾)   | `:chart_with_upwards_trend:` | æ·»åŠ åˆ†ææˆ–è·Ÿè¸ªä»£ç     |
| ğŸ”¨ (é”¤å­)         | `:hammer:`                   | é‡å¤§é‡æ„              |
| â– (å‡å·)         | `:heavy_minus_sign:`         | å‡å°‘ä¸€ä¸ªä¾èµ–          |
| ğŸ³ (é²¸é±¼)         | `:whale:`                    | Docker ç›¸å…³å·¥ä½œ       |
| â• (åŠ å·)         | `:heavy_plug_sign:`          | å¢åŠ ä¸€ä¸ªä¾èµ–          |
| ğŸ”§ (æ‰³æ‰‹)         | `:wrench:`                   | ä¿®æ”¹é…ç½®æ–‡ä»¶          |
| ğŸŒ (åœ°çƒ)         | `:globe_with_meridians:`     | å›½é™…åŒ–ä¸æœ¬åœ°åŒ–        |
| âœï¸ (é“…ç¬”)         | `:pencil2:`                  | ä¿®å¤ typo             |

## git reset --soft

> è¯­æ³•ï¼šgit reset --soft ç‰ˆæœ¬å·
>
> ä½œç”¨ï¼šç”¨äºç‰ˆæœ¬çš„å›é€€ï¼Œåªè¿›è¡Œå¯¹commitæ“ä½œçš„å›é€€ï¼Œä¸å½±å“å·¥ä½œåŒºçš„æ–‡ä»¶

åº”ç”¨åœºæ™¯ï¼šåœ¨æäº¤ä»£ç ä¹‹åï¼Œåˆåœ¨å·¥ä½œåŒºæ·»åŠ äº†ä¸œè¥¿ï¼Œè¿™æ—¶å€™çªç„¶å‘ç°ï¼Œä¸Šä¸€æ¬¡çš„commitæœ‰é”™è¯¯çš„æ–‡ä»¶ï¼Œéœ€è¦é‡æ–°ä¿®æ”¹ï¼Œä½†æ˜¯æ·»åŠ çš„ä¸œè¥¿åˆä¸æƒ³ä¸¢å¤±ï¼Œè€Œä¸”åˆæƒ³ä¿®æ”¹ä¸Šä¸€æ¬¡çš„æäº¤ï¼Œè¿™æ—¶å€™å¯è¿›è¡Œgit reset --softç‰ˆæœ¬å·





